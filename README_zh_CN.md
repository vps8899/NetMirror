# NetMirror - ç°ä»£åŒ–çš„ Looking-glass æœåŠ¡å™¨
[![Docker Pulls](https://img.shields.io/docker/pulls/soyorins/netmirror)](https://hub.docker.com/r/soyorins/netmirror)
[![License](https://img.shields.io/badge/license-Apache%202.0%20%2B%20Commons%20Clause-blue)](LICENSE)

NetMirror æ˜¯ä¸€ä¸ªåŠŸèƒ½ä¸°å¯Œçš„ç°ä»£ Looking-glass æœåŠ¡å™¨ï¼Œæ‹¥æœ‰ç¾è§‚çš„ Web ç•Œé¢ï¼Œç”¨äºç½‘ç»œè¯Šæ–­å’Œæ€§èƒ½æµ‹è¯•ã€‚

æœ¬é¡¹ç›®çš„æ¼”ç¤ºæœåŠ¡å™¨ç”± [Verasel](https://verasel.com) èµåŠ©ã€‚

## ğŸ†• æœ€æ–°æ›´æ–°

### v2.2.0 - è‡ªåŠ¨éƒ¨ç½²è„šæœ¬ï¼ˆæœ€æ–°ç‰ˆï¼‰
- **âš¡ ä¸€é”®éƒ¨ç½²**ï¼šè‡ªåŠ¨åŒ–çš„ä¸»èŠ‚ç‚¹å’Œå­èŠ‚ç‚¹éƒ¨ç½²è„šæœ¬
- **ğŸ”‘ API å¯†é’¥ç®¡ç†**ï¼šç®¡ç†å‘˜ API å¯†é’¥çš„è‡ªåŠ¨ç”Ÿæˆå’ŒéªŒè¯
- **ğŸ³ Docker è‡ªåŠ¨åŒ–**ï¼šè‡ªåŠ¨ Docker å®‰è£…å’Œå®¹å™¨ç®¡ç†
- **ğŸ“¡ è‡ªåŠ¨æ³¨å†Œ**ï¼šå­èŠ‚ç‚¹è‡ªåŠ¨å‘ä¸»èŠ‚ç‚¹æ³¨å†Œ
- **âœ… éªŒè¯ç³»ç»Ÿ**ï¼šéƒ¨ç½²å‰çš„è¿æ¥å’Œæƒé™éªŒè¯
- **ğŸ› ï¸ é”™è¯¯å¤„ç†**ï¼šå…¨é¢çš„é”™è¯¯æ£€æµ‹å’Œæ•…éšœæ’é™¤æŒ‡å¯¼

### v2.1.0 - èŠ‚ç‚¹ç®¡ç†ç³»ç»Ÿ
- **ğŸ›ï¸ ç®¡ç†é¢æ¿**ï¼šå…¨æ–°çš„ç½‘é¡µç‰ˆç®¡ç†ç•Œé¢ï¼Œé‡‡ç”¨ç°ä»£å¡ç‰‡å¸ƒå±€
- **ğŸ”§ API ç®¡ç†**ï¼šåŸºäº API å¯†é’¥è®¤è¯çš„åŠ¨æ€èŠ‚ç‚¹ç®¡ç†
- **ğŸ“¡ GET API æ”¯æŒ**ï¼šé€šè¿‡ç®€å•çš„ GET è¯·æ±‚æ·»åŠ èŠ‚ç‚¹ï¼Œä¾¿äºè‡ªåŠ¨åŒ–
- **ğŸ”„ è‡ªåŠ¨è¿ç§»**ï¼šä»ç¯å¢ƒå˜é‡æ— ç¼è¿ç§»åˆ° API ç®¡ç†
- **ğŸ¨ å¢å¼º UI**ï¼šç¾è§‚çš„åŠ¨ç”»æ•ˆæœã€ç»ç’ƒæ‹Ÿæ€è®¾è®¡å’Œå“åº”å¼ç•Œé¢
- **ğŸ“± ç§»åŠ¨å‹å¥½**ï¼šé’ˆå¯¹æ‰€æœ‰è®¾å¤‡å°ºå¯¸ä¼˜åŒ–çš„ç•Œé¢
- **ğŸ” åŒé‡è®¤è¯**ï¼šæ”¯æŒå¤´éƒ¨ï¼ˆ`X-Api-Key`ï¼‰å’ŒæŸ¥è¯¢å‚æ•°è®¤è¯
- **ğŸ“Š å®æ—¶ç»Ÿè®¡**ï¼šåŒ…å«èŠ‚ç‚¹ç»Ÿè®¡å’ŒçŠ¶æ€æŒ‡ç¤ºå™¨çš„ä»ªè¡¨æ¿

### ä¸»è¦æ–°å¢åŠŸèƒ½ï¼š
- **ä¸€é”®éƒ¨ç½²**ï¼š`netmirror-deploy.sh` è„šæœ¬å®ç°å³æ—¶è®¾ç½®
- **ä¸»ä»æ¶æ„**ï¼šé›†ä¸­å¼èŠ‚ç‚¹ç®¡ç†ä¸åˆ†å¸ƒå¼éƒ¨ç½²
- **åŠ¨æ€èŠ‚ç‚¹ç®¡ç†**ï¼šé€šè¿‡ Web ç•Œé¢æ·»åŠ ã€ç¼–è¾‘ã€åˆ é™¤èŠ‚ç‚¹
- **è‡ªåŠ¨åŒ–æ”¯æŒ**ï¼š`GET /api/admin/nodes/add` ç«¯ç‚¹ç”¨äºè„šæœ¬åŒ–
- **å‘åå…¼å®¹**ï¼šç°æœ‰ç¯å¢ƒå˜é‡é…ç½®ä»ç„¶æœ‰æ•ˆ
- **å¢å¼ºå®‰å…¨æ€§**ï¼šåŸºäº API å¯†é’¥çš„è®¤è¯ä¸æœ¬åœ°å­˜å‚¨
- **æ”¹è¿›ç”¨æˆ·ä½“éªŒ**ï¼šç°ä»£å¡ç‰‡å¼ç•Œé¢æ›¿ä»£ä¼ ç»Ÿè¡¨æ ¼

---

## âœ¨ åŠŸèƒ½ç‰¹æ€§

- **âš¡ ä¸€é”®éƒ¨ç½²**ï¼šè‡ªåŠ¨åŒ–éƒ¨ç½²è„šæœ¬ï¼Œå³æ—¶è®¾ç½®ä¸»èŠ‚ç‚¹å’Œå­èŠ‚ç‚¹ã€‚
- **ğŸ›ï¸ èŠ‚ç‚¹ç®¡ç†**ï¼šåŸºäº Web çš„ç®¡ç†é¢æ¿ï¼Œç”¨äºåŠ¨æ€èŠ‚ç‚¹é…ç½®å’Œç›‘æ§ã€‚
- **ğŸŒ ç½‘ç»œå·¥å…·**ï¼šåŒ…å« Pingã€iPerf3ã€MTRã€Traceroute å’Œ Speedtest ç­‰å·¥å…·å¥—ä»¶ã€‚
- **ğŸ“Š å®æ—¶æµé‡**ï¼šå…·æœ‰ç¾è§‚å¯è§†åŒ–æ•ˆæœçš„å®æ—¶ç½‘ç»œæ¥å£æµé‡ç›‘æ§ã€‚
- **ğŸ–¥ï¸ äº¤äº’å¼ Shell**ï¼šç”¨äºåŸºæœ¬è¯Šæ–­çš„å®‰å…¨æ¨¡æ‹Ÿ Shell ç¯å¢ƒã€‚
- **ğŸ”Œ API é›†æˆ**ï¼šç”¨äºè‡ªåŠ¨åŒ–å’Œè„šæœ¬åŒ–çš„å…¨é¢ RESTful APIã€‚
- **ğŸ³ è½»æ¾éƒ¨ç½²**ï¼šä»¥å•ä¸ª Docker å®¹å™¨å½¢å¼æä¾›ï¼Œé…å¤‡è‡ªåŠ¨åŒ–éƒ¨ç½²è„šæœ¬ã€‚
- **ğŸ¨ ç°ä»£ UI**ï¼šåŸºäº Vue.js å’Œ Tailwind CSS æ„å»ºçš„ç®€æ´å“åº”å¼ç”¨æˆ·ç•Œé¢ã€‚
- **âš™ï¸ å¯å®šåˆ¶**ï¼šé€šè¿‡ç¯å¢ƒå˜é‡æˆ– Web ç•Œé¢é…ç½®åŠŸèƒ½å’ŒæœåŠ¡å™¨è¯¦æƒ…ã€‚

## ğŸš€ å¿«é€Ÿå¼€å§‹

### âš¡ ä¸€é”®éƒ¨ç½²ï¼ˆæ¨èï¼‰

**éƒ¨ç½²ä¸»èŠ‚ç‚¹ï¼š**
```bash
curl -fsSL https://raw.githubusercontent.com/catcat-blog/NetMirror/main/scripts/netmirror-deploy.sh | bash -s -- \
  --name "ä¸»èŠ‚ç‚¹" \
  --location "æ‚¨çš„ä½ç½®" \
  --port 3000 \
  --non-interactive
```

**éƒ¨ç½²å­èŠ‚ç‚¹ï¼š**
```bash
curl -fsSL https://raw.githubusercontent.com/catcat-blog/NetMirror/main/scripts/netmirror-deploy.sh | bash -s -- \
  --name "å­èŠ‚ç‚¹åç§°" \
  --location "å­èŠ‚ç‚¹ä½ç½®" \
  --port 3001 \
  --master "http://æ‚¨çš„ä¸»èŠ‚ç‚¹IP:3000" \
  --admin-key "æ‚¨çš„APIå¯†é’¥" \
  --non-interactive
```

éƒ¨ç½²è„šæœ¬ä¼šè‡ªåŠ¨ï¼š
- ğŸ³ æ ¹æ®éœ€è¦å®‰è£… Docker
- ğŸ”‘ ç”Ÿæˆå®‰å…¨ API å¯†é’¥ï¼ˆä¸»èŠ‚ç‚¹ï¼‰
- âš™ï¸ é…ç½®ç¯å¢ƒå˜é‡
- ğŸš€ ä½¿ç”¨æœ€ä½³è®¾ç½®å¯åŠ¨å®¹å™¨
- ğŸ“¡ å°†å­èŠ‚ç‚¹æ³¨å†Œåˆ°ä¸»èŠ‚ç‚¹
- âœ… éªŒè¯è¿æ¥å’Œæƒé™

> **ğŸ“– æœ‰å…³è¯¦ç»†éƒ¨ç½²é€‰é¡¹å’Œæ•…éšœæ’é™¤ï¼Œè¯·å‚é˜… [scripts/README.md](scripts/README.md)**

### æ‰‹åŠ¨ Docker Compose éƒ¨ç½²

1.  **å…‹éš†ä»“åº“:**
    ```bash
    git clone https://github.com/Yuri-NagaSaki/NetMirror.git
    cd NetMirror
    ```

2.  **åˆ›å»ºç¯å¢ƒæ–‡ä»¶:**

    å¤åˆ¶ç¯å¢ƒæ–‡ä»¶ç¤ºä¾‹ä»¥åˆ›å»ºæ‚¨è‡ªå·±çš„é…ç½®ã€‚
    ```bash
    cp .env.example .env
    ```
    *æ³¨æ„: å¦‚æœ `.env.example` æ–‡ä»¶ä¸å­˜åœ¨ï¼Œæ‚¨å¯ä»¥åˆ›å»ºä¸€ä¸ªç©ºçš„ `.env` æ–‡ä»¶ï¼Œå¹¶ä»ä¸‹è¡¨ä¸­æ·»åŠ æ‚¨éœ€è¦çš„å˜é‡ã€‚*

3.  **è‡ªå®šä¹‰æ‚¨çš„é…ç½® (å¯é€‰):**

    ç¼–è¾‘ `.env` æ–‡ä»¶ä»¥è®¾ç½®æ‚¨çš„æœåŠ¡å™¨ä½ç½®ã€å…¬ç½‘ IP åœ°å€å’Œå…¶ä»–é€‰é¡¹ã€‚

4.  **å¯åŠ¨æœåŠ¡:**
```bash
services:
  als:
    image: soyorins/netmirror:latest
    container_name: looking-glass-e
    restart: always
    network_mode: host
    user: root
    env_file:
      - .env
    volumes:
      - ./data:/data
      - ./.air.toml:/app/.air.toml
    healthcheck:
      test: ["CMD", "wget", "--quiet", "--tries=1", "--spider", "http://localhost:${HTTP_PORT:-80}/"]
      interval: 30s
      timeout: 10s
      retries: 3
    logging:
      driver: "json-file"
      options:
        max-size: "10m"
        max-file: "3"
```

åº”ç”¨å°†å¯ä»¥é€šè¿‡ `http://<æ‚¨çš„æœåŠ¡å™¨IP>` è®¿é—®ã€‚é»˜è®¤ç«¯å£æ˜¯ 3000ï¼Œå¯ä»¥é€šè¿‡ `HTTP_PORT` ç¯å¢ƒå˜é‡è¿›è¡Œæ›´æ”¹ã€‚

> **ğŸ›ï¸ ç®¡ç†é¢æ¿è®¿é—®**ï¼šå¦‚æœæ‚¨åœ¨ `.env` æ–‡ä»¶ä¸­è®¾ç½®äº† `ADMIN_API_KEY`ï¼Œæ‚¨å¯ä»¥é€šè¿‡ç‚¹å‡»æµ®åŠ¨æ“ä½œæŒ‰é’®ï¼ˆå³ä¸‹è§’ï¼‰â†’ è®¾ç½®å›¾æ ‡ï¼ˆâš™ï¸ï¼‰æ¥è®¿é—®ç®¡ç†é¢æ¿ã€‚

## ğŸ“¦ Docker é•œåƒ

é¢„æ„å»ºçš„å¤šæ¶æ„ Docker é•œåƒå¯åœ¨ DockerHub ä¸Šè·å–ï¼š

- **æ”¯æŒçš„æ¶æ„**: `linux/amd64`, `linux/arm64`
- **é•œåƒä»“åº“**: `soyorins/netmirror`
- **å¯ç”¨æ ‡ç­¾**: `latest`ã€ç‰ˆæœ¬æ ‡ç­¾ï¼ˆå¦‚ `v1.0.0`ï¼‰ã€åˆ†æ”¯åç§°

å½“ä»£ç æ¨é€åˆ°ä¸»åˆ†æ”¯æˆ–åˆ›å»ºæ–°æ ‡ç­¾æ—¶ï¼Œé•œåƒä¼šé€šè¿‡ GitHub Actions è‡ªåŠ¨æ„å»ºå’Œå‘å¸ƒã€‚

## ğŸ”§ é…ç½®

é€šè¿‡åœ¨ `.env` æ–‡ä»¶ä¸­è®¾ç½®ç¯å¢ƒå˜é‡æ¥é…ç½® NetMirrorã€‚

| é”® | ç¤ºä¾‹ | é»˜è®¤å€¼ | æè¿° |
|---|---|---|---|
| `LISTEN_IP` | `127.0.0.1` | (æ‰€æœ‰ IP) | æœåŠ¡å™¨ç›‘å¬çš„ IP åœ°å€ã€‚ |
| `HTTP_PORT` | `8080` | `80` | æœåŠ¡å™¨ç›‘å¬çš„ç«¯å£ã€‚ |
| `SPEEDTEST_FILE_LIST` | `100MB 1GB` | `1MB 10MB 100MB 1GB` | ç”¨äºé€Ÿåº¦æµ‹è¯•çš„æ–‡ä»¶å¤§å°åˆ—è¡¨ï¼Œä»¥ç©ºæ ¼åˆ†éš”ã€‚ |
| `LOCATION` | `"ä¸­å›½ï¼ŒåŒ—äº¬"` | (é€šè¿‡ ipapi.co è‡ªåŠ¨æ£€æµ‹) | æè¿°æœåŠ¡å™¨ä½ç½®çš„æ–‡æœ¬ã€‚ |
| `PUBLIC_IPV4` | `1.1.1.1` | (è‡ªåŠ¨æ£€æµ‹) | æœåŠ¡å™¨çš„å…¬ç½‘ IPv4 åœ°å€ã€‚ |
| `PUBLIC_IPV6` | `fe80::1` | (è‡ªåŠ¨æ£€æµ‹) | æœåŠ¡å™¨çš„å…¬ç½‘ IPv6 åœ°å€ã€‚ |
| `DISPLAY_TRAFFIC` | `true` | `true` | å®æ—¶æµé‡æ˜¾ç¤ºçš„å¼€å…³ã€‚ |
| `ENABLE_SPEEDTEST` | `true` | `true` | é€Ÿåº¦æµ‹è¯•åŠŸèƒ½çš„å¼€å…³ã€‚ |
| `UTILITIES_PING` | `true` | `true` | Ping å·¥å…·çš„å¼€å…³ã€‚ |
| `UTILITIES_SPEEDTESTDOTNET`| `true` | `true` | Speedtest.net å·¥å…·çš„å¼€å…³ã€‚ |
| `UTILITIES_FAKESHELL` | `true` | `true` | æ¨¡æ‹Ÿ Shell å·¥å…·çš„å¼€å…³ã€‚ |
| `UTILITIES_IPERF3` | `true` | `true` | iPerf3 æœåŠ¡å™¨å·¥å…·çš„å¼€å…³ã€‚ |
| `UTILITIES_IPERF3_PORT_MIN` | `30000` | `30000` | iPerf3 æœåŠ¡å™¨ç«¯å£èŒƒå›´ - èµ·å§‹ã€‚ |
| `UTILITIES_IPERF3_PORT_MAX` | `31000` | `31000` | iPerf3 æœåŠ¡å™¨ç«¯å£èŒƒå›´ - ç»“æŸã€‚ |
| `SPONSOR_MESSAGE` | `"æ¬¢è¿"` | `''` | æ˜¾ç¤ºèµåŠ©å•†ä¿¡æ¯ã€‚æ”¯æŒæ–‡æœ¬ã€URL æˆ–å®¹å™¨å†…çš„æ–‡ä»¶è·¯å¾„ã€‚ |

### ğŸ”„ èŠ‚ç‚¹ç®¡ç†

NetMirror æ”¯æŒåŸºäºç¯å¢ƒå˜é‡çš„èŠ‚ç‚¹é…ç½®ï¼ˆä¼ ç»Ÿï¼‰å’ŒåŸºäº API çš„èŠ‚ç‚¹ç®¡ç†ï¼ˆæ¨èï¼‰ã€‚

> **ğŸ’¡ å¿«é€Ÿå¼€å§‹**ï¼šåœ¨ç¯å¢ƒä¸­è®¾ç½® `ADMIN_API_KEY`ï¼Œé‡å¯æœåŠ¡å™¨ï¼Œç„¶åç‚¹å‡» Web ç•Œé¢ä¸­çš„è®¾ç½®å›¾æ ‡å³å¯è®¿é—®ç®¡ç†é¢æ¿ï¼

#### ç¯å¢ƒå˜é‡é…ç½®ï¼ˆä¼ ç»Ÿï¼‰

ä½¿ç”¨ç¯å¢ƒå˜é‡é…ç½®èŠ‚ç‚¹ä»¥ä¿è¯å‘åå…¼å®¹æ€§ï¼š

| é”® | ç¤ºä¾‹ | æè¿° |
|---|---|---|
| `LG_NODES` | `ä¼¦æ•¦\\|è‹±å›½ï¼Œä¼¦æ•¦\\|https://lg1.example.com;ä¸œäº¬\\|æ—¥æœ¬ï¼Œä¸œäº¬\\|https://lg2.example.com` | ä»¥åˆ†å·åˆ†éš”çš„èŠ‚ç‚¹åˆ—è¡¨ï¼Œæ ¼å¼ï¼š`åç§°\\|ä½ç½®\\|URL` |
| `LG_CURRENT_URL` | `https://lg1.example.com` | å½“å‰èŠ‚ç‚¹çš„ URLï¼ˆåœ¨åˆ—è¡¨ä¸­æ ‡è®°ä¸º"å½“å‰"ï¼‰ |
| `LG_CURRENT_NAME` | `ä¼¦æ•¦èŠ‚ç‚¹` | å½“å‰èŠ‚ç‚¹çš„æ˜¾ç¤ºåç§° |
| `LG_CURRENT_LOCATION` | `è‹±å›½ï¼Œä¼¦æ•¦` | å½“å‰èŠ‚ç‚¹çš„ä½ç½®æè¿° |

#### åŸºäº API çš„èŠ‚ç‚¹ç®¡ç†ï¼ˆæ¨èï¼‰

ä½¿ç”¨å¸¦æœ‰ API è®¤è¯çš„ç®¡ç†ç•Œé¢è¿›è¡ŒåŠ¨æ€èŠ‚ç‚¹ç®¡ç†ï¼š

| é”® | ç¤ºä¾‹ | æè¿° |
|---|---|---|
| `ADMIN_API_KEY` | `your-secret-api-key-here` | ç®¡ç†å‘˜ API è®¿é—®çš„å¯†é’¥ï¼ˆèŠ‚ç‚¹ç®¡ç†å¿…éœ€ï¼‰ |
| `DATA_DIR` | `/data` | å­˜å‚¨èŠ‚ç‚¹é…ç½®æ–‡ä»¶çš„ç›®å½•ï¼ˆé»˜è®¤ï¼š`./data`ï¼‰ |

**ä½¿ç”¨ç®¡ç†ç•Œé¢ï¼š**

1. **è®¾ç½® API å¯†é’¥**ï¼šåœ¨ç¯å¢ƒä¸­é…ç½® `ADMIN_API_KEY`
2. **é‡å¯æœåŠ¡å™¨**ï¼šç®¡ç†é¢æ¿ä»…åœ¨è®¾ç½® API å¯†é’¥æ—¶å¯ç”¨
3. **è®¿é—®ç®¡ç†é¢æ¿**ï¼š
   - **Web ç•Œé¢**ï¼šç‚¹å‡»æµ®åŠ¨æ“ä½œæŒ‰é’®ï¼ˆå³ä¸‹è§’ï¼‰ä¸­çš„è®¾ç½®å›¾æ ‡ï¼ˆâš™ï¸ï¼‰
   - **ç›´æ¥ URL**ï¼šä¸å¯ç”¨ - å‡ºäºå®‰å…¨è€ƒè™‘ï¼Œä»…å¯é€šè¿‡ Web ç•Œé¢è®¿é—®
4. **èº«ä»½éªŒè¯**ï¼šè¾“å…¥æ‚¨çš„ API å¯†é’¥ï¼ˆå°†å­˜å‚¨åœ¨æœ¬åœ°ä»¥ä¾¿ä½¿ç”¨ï¼‰
5. **ç®¡ç†èŠ‚ç‚¹**ï¼šé€šè¿‡ç°ä»£å¡ç‰‡å¼ç•Œé¢æ·»åŠ ã€ç¼–è¾‘æˆ–åˆ é™¤èŠ‚ç‚¹

> **ğŸ’¡ ç®¡ç†é¢æ¿ä½ç½®**ï¼šç®¡ç†ç•Œé¢é›†æˆåœ¨ä¸»åº”ç”¨ç¨‹åºä¸­ã€‚åœ¨é¡µé¢å³ä¸‹è§’æŸ¥æ‰¾æµ®åŠ¨æ“ä½œæŒ‰é’®ï¼Œæ‚¬åœæ˜¾ç¤ºè®¾ç½®å›¾æ ‡ï¼Œç„¶åç‚¹å‡»è®¿é—®ç®¡ç†é¢æ¿ã€‚

**ç®¡ç†é¢æ¿åŠŸèƒ½ï¼š**
- ğŸ›ï¸ **ç°ä»£å¡ç‰‡å¸ƒå±€**ï¼šå…·æœ‰å®æ—¶çŠ¶æ€çš„å¯è§†åŒ–èŠ‚ç‚¹ç®¡ç†
- ğŸ“Š **ä»ªè¡¨æ¿ç»Ÿè®¡**ï¼šæ€»èŠ‚ç‚¹æ•°ã€åœ¨çº¿çŠ¶æ€å’Œå½“å‰èŠ‚ç‚¹æ¦‚è§ˆ
- ğŸ” **è¿æ¥æµ‹è¯•**ï¼šä¸€é”®æµ‹è¯•æ‰€æœ‰èŠ‚ç‚¹çš„è¿æ¥
- âœï¸ **CRUD æ“ä½œ**ï¼šåˆ›å»ºã€è¯»å–ã€æ›´æ–°å’Œåˆ é™¤èŠ‚ç‚¹
- ğŸ“± **å“åº”å¼è®¾è®¡**ï¼šåœ¨æ¡Œé¢ã€å¹³æ¿å’Œç§»åŠ¨è®¾å¤‡ä¸Šå®Œç¾è¿è¡Œ

**API ç«¯ç‚¹ï¼š**

- `GET /nodes` - åˆ—å‡ºæ‰€æœ‰èŠ‚ç‚¹çš„å…¬å…±ç«¯ç‚¹
- `GET /nodes/latency` - æµ‹è¯•å½“å‰èŠ‚ç‚¹çš„å»¶è¿Ÿ
- `POST /api/admin/nodes` - åˆ›å»ºæ–°èŠ‚ç‚¹ï¼ˆéœ€è¦ API å¯†é’¥ï¼‰
- `GET /api/admin/nodes/add` - é€šè¿‡ GET è¯·æ±‚åˆ›å»ºæ–°èŠ‚ç‚¹ï¼ˆéœ€è¦ API å¯†é’¥ï¼‰
- `GET /api/admin/nodes/:id` - è·å–èŠ‚ç‚¹è¯¦æƒ…ï¼ˆéœ€è¦ API å¯†é’¥ï¼‰
- `PUT /api/admin/nodes/:id` - æ›´æ–°èŠ‚ç‚¹ï¼ˆéœ€è¦ API å¯†é’¥ï¼‰
- `DELETE /api/admin/nodes/:id` - åˆ é™¤èŠ‚ç‚¹ï¼ˆéœ€è¦ API å¯†é’¥ï¼‰

**GET è¯·æ±‚èŠ‚ç‚¹åˆ›å»ºï¼š**

ç”¨äºè‡ªåŠ¨åŒ–å’Œè„šæœ¬åŒ–ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ç®€å•çš„ GET è¯·æ±‚æ·»åŠ èŠ‚ç‚¹ï¼š

```bash
# ä½¿ç”¨æŸ¥è¯¢å‚æ•°æ·»åŠ èŠ‚ç‚¹
curl "http://æ‚¨çš„æœåŠ¡å™¨:ç«¯å£/api/admin/nodes/add?api_key=æ‚¨çš„APIå¯†é’¥&name=ä¸œäº¬&location=æ—¥æœ¬ï¼Œä¸œäº¬&url=https://lg.tokyo.example.com"

# æˆ–ä½¿ç”¨å¤´éƒ¨è®¤è¯
curl -H "X-Api-Key: æ‚¨çš„APIå¯†é’¥" "http://æ‚¨çš„æœåŠ¡å™¨:ç«¯å£/api/admin/nodes/add?name=ä¸œäº¬&location=æ—¥æœ¬ï¼Œä¸œäº¬&url=https://lg.tokyo.example.com"
```

**å¿…éœ€å‚æ•°ï¼š**
- `name` - èŠ‚ç‚¹æ˜¾ç¤ºåç§°
- `location` - èŠ‚ç‚¹ä½ç½®æè¿°  
- `url` - èŠ‚ç‚¹ç«¯ç‚¹ URL

**è®¤è¯æ–¹å¼ï¼š**
1. **å¤´éƒ¨è®¤è¯**ï¼š`X-Api-Key: æ‚¨çš„APIå¯†é’¥`
2. **æŸ¥è¯¢å‚æ•°è®¤è¯**ï¼š`?api_key=æ‚¨çš„APIå¯†é’¥`

**æ‰¹é‡èŠ‚ç‚¹æ·»åŠ è„šæœ¬ï¼š**

```bash
#!/bin/bash
API_KEY="æ‚¨çš„å¯†é’¥"
SERVER="http://æ‚¨çš„æœåŠ¡å™¨:3000"

# è¦æ·»åŠ çš„èŠ‚ç‚¹æ•°ç»„
declare -a nodes=(
    "ä¼¦æ•¦|è‹±å›½ï¼Œä¼¦æ•¦|https://lg.london.example.com"
    "ä¸œäº¬|æ—¥æœ¬ï¼Œä¸œäº¬|https://lg.tokyo.example.com"
    "æ–°åŠ å¡|æ–°åŠ å¡|https://lg.singapore.example.com"
    "æ³•å…°å…‹ç¦|å¾·å›½ï¼Œæ³•å…°å…‹ç¦|https://lg.frankfurt.example.com"
)

# æ·»åŠ æ¯ä¸ªèŠ‚ç‚¹
for node in "${nodes[@]}"; do
    IFS='|' read -r name location url <<< "$node"
    echo "æ·»åŠ èŠ‚ç‚¹: $name"
    
    response=$(curl -s -H "X-Api-Key: $API_KEY" \
        "$SERVER/api/admin/nodes/add?name=$(echo "$name" | sed 's/ /%20/g')&location=$(echo "$location" | sed 's/ /%20/g;s/,/%2C/g')&url=$(echo "$url")")
    
    if echo "$response" | grep -q '"success":true'; then
        echo "âœ… æˆåŠŸæ·»åŠ  $name"
    else
        echo "âŒ æ·»åŠ  $name å¤±è´¥: $response"
    fi
done
```

**èŠ‚ç‚¹é…ç½®æ ¼å¼ï¼š**
```json
{
  "name": "ä¼¦æ•¦èŠ‚ç‚¹",
  "location": "è‹±å›½ï¼Œä¼¦æ•¦", 
  "url": "https://lg.london.example.com"
}
```

#### ä»ç¯å¢ƒå˜é‡è¿ç§»

API ç®¡ç†çš„èŠ‚ç‚¹ä¼˜å…ˆäºç¯å¢ƒå˜é‡é…ç½®ã€‚å½“å­˜åœ¨ API ç®¡ç†çš„èŠ‚ç‚¹æ—¶ï¼Œç¯å¢ƒå˜é‡å°†è¢«å¿½ç•¥ã€‚è¦è¿ç§»ï¼š

1. è®¾ç½® `ADMIN_API_KEY`
2. ä½¿ç”¨ç®¡ç†ç•Œé¢æ·»åŠ ç°æœ‰èŠ‚ç‚¹
3. ç§»é™¤ `LG_NODES` å’Œç›¸å…³ç¯å¢ƒå˜é‡
4. é‡å¯æœåŠ¡

## ğŸ›ï¸ ç®¡ç†é¢æ¿è®¿é—®

**å¦‚ä½•è®¿é—®**ï¼šç‚¹å‡»æµ®åŠ¨æ“ä½œæŒ‰é’®ï¼ˆå³ä¸‹è§’ï¼‰â†’ è®¾ç½®å›¾æ ‡ï¼ˆâš™ï¸ï¼‰
**ç»„ä»¶ä½ç½®**ï¼š`/ui/src/components/Admin.vue`
**èº«ä»½éªŒè¯**ï¼šéœ€è¦ `ADMIN_API_KEY`ï¼ˆé¦–æ¬¡ç™»å½•åå­˜å‚¨åœ¨æœ¬åœ°ï¼‰

## ğŸ—ï¸ ä»æºç æ„å»º

### ç¯å¢ƒè¦æ±‚

- Go
- Node.js & npm
- Docker

### æ„å»ºæ­¥éª¤

1.  **æ„å»ºå‰ç«¯:**
    ```bash
    cd ui
    npm install
    npm run build
    ```

2.  **æ„å»ºåç«¯:**
    ```bash
    cd ../backend
    go build -o ../NetMirror
    ```

3.  **è¿è¡Œåº”ç”¨:**

    æœ€ç»ˆçš„å¯æ‰§è¡Œæ–‡ä»¶å°†ä½äºé¡¹ç›®æ ¹ç›®å½•ã€‚åœ¨è¿è¡Œå‰ï¼Œè¯·ç¡®ä¿å·²è®¾ç½®æ‰€æœ‰å¿…è¦çš„ç¯å¢ƒå˜é‡ã€‚
    ```bash
    ./NetMirror
    ```

## ğŸ“„ è®¸å¯è¯

Apache License, Version 2.0 and the Commons Clause Restriction.
